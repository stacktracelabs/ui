#!/usr/bin/env bash

set -e

if output="$(git status --porcelain)" && [ -n "$output" ]; then
    echo "Git is not clean. Commit your changes first."
    exit 1
fi

VERSION=$(npm version $1 --no-git-tag-version)
npm run build
git commit -m "bump @stacktrace/ui $VERSION" package.json package-lock.json

npm pack && npm publish --access public && rm -f *.tgz

echo "ðŸš€ @stacktrace/ui $VERSION released!"
